@page "/"
@inject FinanceControl.Data.AuthenticationService authService
@inject NavigationManager navigationManager

<div class="login-form">
    <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" id="username" class="form-control" @bind="username" />
    </div>

    <div class="form-group">
        <label for="password">Password:</label>
        <input type="password" id="password" class="form-control" @bind="password" />
    </div>

    <button class="btn-login" @onclick="Login">Login</button>

    @if (errorMessage != null)
    {
        <p class="error-message">@errorMessage</p>
    }
</div>

@code {
    private string username;
    private string password;
    private string errorMessage;

    private async Task Login()
    {

        if (authService.Login(username, password).Result)
        {
            navigationManager.NavigateTo("/finance");
        }
        else
        {
            errorMessage = "Credenciais inválidas. Tente novamente.";
        }
    }
}
